<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BharatNet Program Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .metric-card {
            transition: all 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .chart-container {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .state-dot {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .state-dot:hover {
            transform: scale(1.2);
        }
        .number-animation {
            animation: countUp 1s ease-out;
        }
        @keyframes countUp {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // BharatNet Data
        const bharatNetData = [
          {
            id: 1,
            state: "Punjab",
            pia: "HFCL",
            agreementDate: "19.02.2025",
            newUpgraded: 673,
            totalGPs: 13337,
            hotoTarget: 9498,
            hotoCompleted04: 9938,
            hotoCompleted11: 9938,
            hotoPercentage: 105,
            surveyTarget: 667,
            surveyCompleted04: 10364,
            surveyCompleted11: 11411,
            surveyPercentage: 114,
            snocStatus: "Hardware Installation in progress",
            avgUptimeGPs04: 7007,
            avgUptimeGPs11: 6965,
            avgUptimeDelta: -42,
            ftthConnections04: 182364,
            ftthConnections11: 183025,
            ftthDelta: 661,
            commissionedGPs11: 0,
            financialProgress: 124.46,
            ofcTotalRKM: 45081,
            ofcExistingRKM: 29660,
            ofcNewRKM: 15421,
            ofcLaidRKM: 0
          },
          {
            id: 2,
            state: "Uttar Pradesh (E)",
            pia: "RVNL",
            agreementDate: "20.02.2025",
            newUpgraded: 8644,
            totalGPs: 43072,
            hotoTarget: 25821,
            hotoCompleted04: 23115,
            hotoCompleted11: 24442,
            hotoPercentage: 95,
            surveyTarget: 2154,
            surveyCompleted04: 28241,
            surveyCompleted11: 28241,
            surveyPercentage: 162,
            snocStatus: "Material delivery & equipment installation in progress",
            avgUptimeGPs04: 2698,
            avgUptimeGPs11: 2622,
            avgUptimeDelta: -76,
            ftthConnections04: 18143,
            ftthConnections11: 18224,
            ftthDelta: 81,
            commissionedGPs11: 0,
            financialProgress: 500.82,
            ofcTotalRKM: 133408,
            ofcExistingRKM: 77065,
            ofcNewRKM: 56343,
            ofcLaidRKM: 0
          },
          {
            id: 3,
            state: "Uttar Pradesh (W)",
            pia: "RVNL",
            agreementDate: "20.02.2025",
            newUpgraded: 3769,
            totalGPs: 16218,
            hotoTarget: 9337,
            hotoCompleted04: 9386,
            hotoCompleted11: 9386,
            hotoPercentage: 101,
            surveyTarget: 811,
            surveyCompleted04: 8387,
            surveyCompleted11: 8387,
            surveyPercentage: 206,
            snocStatus: "Civil and Electrical work in progress",
            avgUptimeGPs04: 1337,
            avgUptimeGPs11: 1213,
            avgUptimeDelta: -124,
            ftthConnections04: 15984,
            ftthConnections11: 16031,
            ftthDelta: 47,
            commissionedGPs11: 0,
            financialProgress: 191.74,
            ofcTotalRKM: 58860,
            ofcExistingRKM: 32596,
            ofcNewRKM: 26264,
            ofcLaidRKM: 0
          },
          {
            id: 4,
            state: "Himachal Pradesh",
            pia: "ITI",
            agreementDate: "25.02.2025",
            newUpgraded: 3363,
            totalGPs: 3615,
            hotoTarget: 189,
            hotoCompleted04: 258,
            hotoCompleted11: 258,
            hotoPercentage: 137,
            surveyTarget: 181,
            surveyCompleted04: 3873,
            surveyCompleted11: 3873,
            surveyPercentage: 143,
            snocStatus: "Civil and Electrical work in progress",
            avgUptimeGPs04: 212,
            avgUptimeGPs11: 202,
            avgUptimeDelta: -10,
            ftthConnections04: 2349,
            ftthConnections11: 2357,
            ftthDelta: 8,
            commissionedGPs11: 0,
            financialProgress: 129.15,
            ofcTotalRKM: 20943,
            ofcExistingRKM: 828,
            ofcNewRKM: 20115,
            ofcLaidRKM: 0
          },
          {
            id: 5,
            state: "West Bengal & A&N",
            pia: "ITI",
            agreementDate: "25.02.2025",
            newUpgraded: 668,
            totalGPs: 3412,
            hotoTarget: 2058,
            hotoCompleted04: 2628,
            hotoCompleted11: 2670,
            hotoPercentage: 130,
            surveyTarget: 171,
            surveyCompleted04: 1168,
            surveyCompleted11: 1337,
            surveyPercentage: 129,
            snocStatus: "Civil and Electrical work in progress",
            avgUptimeGPs04: 1838,
            avgUptimeGPs11: 1661,
            avgUptimeDelta: -177,
            ftthConnections04: 45790,
            ftthConnections11: 45972,
            ftthDelta: 182,
            commissionedGPs11: 0,
            financialProgress: 167.44,
            ofcTotalRKM: 38496,
            ofcExistingRKM: 19671,
            ofcNewRKM: 18825,
            ofcLaidRKM: 0
          },
          {
            id: 6,
            state: "Bihar",
            pia: "Polycab",
            agreementDate: "12.03.2025",
            newUpgraded: 81,
            totalGPs: 8405,
            hotoTarget: 6243,
            hotoCompleted04: 4212,
            hotoCompleted11: 6377,
            hotoPercentage: 102,
            surveyTarget: 420,
            surveyCompleted04: 8157,
            surveyCompleted11: 8866,
            surveyPercentage: 172,
            snocStatus: "Civil & Electrical work in progress",
            avgUptimeGPs04: 2326,
            avgUptimeGPs11: 2171,
            avgUptimeDelta: -155,
            ftthConnections04: 29662,
            ftthConnections11: 29743,
            ftthDelta: 81,
            commissionedGPs11: 0,
            financialProgress: 154.97,
            ofcTotalRKM: 53274,
            ofcExistingRKM: 30610,
            ofcNewRKM: 22664,
            ofcLaidRKM: 0
          },
          {
            id: 7,
            state: "Madhya Pradesh",
            pia: "NCC",
            agreementDate: "19.05.2025",
            newUpgraded: 5046,
            totalGPs: 22896,
            hotoTarget: 4463,
            hotoCompleted04: 679,
            hotoCompleted11: 1756,
            hotoPercentage: 39,
            surveyTarget: 1145,
            surveyCompleted04: 4867,
            surveyCompleted11: 6087,
            surveyPercentage: 122,
            snocStatus: "Civil & Electrical work in progress",
            avgUptimeGPs04: 1347,
            avgUptimeGPs11: 1295,
            avgUptimeDelta: -52,
            ftthConnections04: 35189,
            ftthConnections11: 35183,
            ftthDelta: -6,
            commissionedGPs11: 0,
            financialProgress: 494.30,
            ofcTotalRKM: 127565,
            ofcExistingRKM: 61917,
            ofcNewRKM: 65648,
            ofcLaidRKM: 0
          },
          {
            id: 8,
            state: "Uttarakhand",
            pia: "NCC",
            agreementDate: "19.05.2025",
            newUpgraded: 6118,
            totalGPs: 7937,
            hotoTarget: 455,
            hotoCompleted04: 446,
            hotoCompleted11: 446,
            hotoPercentage: 98,
            surveyTarget: 397,
            surveyCompleted04: 4409,
            surveyCompleted11: 4516,
            surveyPercentage: 132,
            snocStatus: "Civil & Electrical work in progress",
            avgUptimeGPs04: 627,
            avgUptimeGPs11: 615,
            avgUptimeDelta: -12,
            ftthConnections04: 13539,
            ftthConnections11: 13520,
            ftthDelta: -19,
            commissionedGPs11: 0,
            financialProgress: 182.11,
            ofcTotalRKM: 32243,
            ofcExistingRKM: 5544,
            ofcNewRKM: 26699,
            ofcLaidRKM: 0
          },
          {
            id: 9,
            state: "Jammu & Kashmir",
            pia: "STL",
            agreementDate: "11.06.2025",
            newUpgraded: 4079,
            totalGPs: 4492,
            hotoTarget: 103,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 225,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "SNOC location not finalized",
            avgUptimeGPs04: 396,
            avgUptimeGPs11: 362,
            avgUptimeDelta: -34,
            ftthConnections04: 3832,
            ftthConnections11: 3836,
            ftthDelta: 4,
            commissionedGPs11: 0,
            financialProgress: 162.05,
            ofcTotalRKM: 14398,
            ofcExistingRKM: 1090,
            ofcNewRKM: 13308,
            ofcLaidRKM: 0
          },
          {
            id: 10,
            state: "Kerala",
            pia: "GR Infra",
            agreementDate: "16.06.2025",
            newUpgraded: 1,
            totalGPs: 978,
            hotoTarget: 244,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 49,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "SNOC location finalized",
            avgUptimeGPs04: 607,
            avgUptimeGPs11: 599,
            avgUptimeDelta: -8,
            ftthConnections04: 164413,
            ftthConnections11: 163572,
            ftthDelta: -841,
            commissionedGPs11: 0,
            financialProgress: 76.50,
            ofcTotalRKM: 16685,
            ofcExistingRKM: 8185,
            ofcNewRKM: 8500,
            ofcLaidRKM: 0
          },
          {
            id: 11,
            state: "Karnataka",
            pia: "Polycab",
            agreementDate: "17.06.2025",
            newUpgraded: 209,
            totalGPs: 6391,
            hotoTarget: 1546,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 320,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "SNOC location finalized",
            avgUptimeGPs04: 2330,
            avgUptimeGPs11: 2354,
            avgUptimeDelta: 24,
            ftthConnections04: 31738,
            ftthConnections11: 31351,
            ftthDelta: -387,
            commissionedGPs11: 0,
            financialProgress: 374.10,
            ofcTotalRKM: 98021,
            ofcExistingRKM: 46517,
            ofcNewRKM: 51504,
            ofcLaidRKM: 0
          },
          {
            id: 12,
            state: "Arunachal Pradesh",
            pia: "ITI",
            agreementDate: "26.06.2025",
            newUpgraded: 5394,
            totalGPs: 5902,
            hotoTarget: 127,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 295,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "SNOC location not finalized",
            avgUptimeGPs04: 40,
            avgUptimeGPs11: 38,
            avgUptimeDelta: -2,
            ftthConnections04: 4224,
            ftthConnections11: 4285,
            ftthDelta: 61,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 13113,
            ofcExistingRKM: 923,
            ofcNewRKM: 12190,
            ofcLaidRKM: 0
          },
          {
            id: 13,
            state: "Rajasthan",
            pia: "Re-Tender",
            agreementDate: "",
            newUpgraded: 2606,
            totalGPs: 11352,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Re-Tender",
            avgUptimeGPs04: 5838,
            avgUptimeGPs11: 5888,
            avgUptimeDelta: 50,
            ftthConnections04: 38302,
            ftthConnections11: 38350,
            ftthDelta: 48,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 112961,
            ofcExistingRKM: 55418,
            ofcNewRKM: 57543,
            ofcLaidRKM: 0
          },
          {
            id: 14,
            state: "Haryana",
            pia: "Re-Tender",
            agreementDate: "",
            newUpgraded: 174,
            totalGPs: 6256,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Re-Tender",
            avgUptimeGPs04: 1182,
            avgUptimeGPs11: 1066,
            avgUptimeDelta: -116,
            ftthConnections04: 118410,
            ftthConnections11: 118622,
            ftthDelta: 212,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 36865,
            ofcExistingRKM: 18842,
            ofcNewRKM: 18023,
            ofcLaidRKM: 0
          },
          {
            id: 15,
            state: "Mizoram",
            pia: "Re-Tender",
            agreementDate: "",
            newUpgraded: 3056,
            totalGPs: 3817,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Re-Tender",
            avgUptimeGPs04: 269,
            avgUptimeGPs11: 234,
            avgUptimeDelta: -35,
            ftthConnections04: 934,
            ftthConnections11: 934,
            ftthDelta: 0,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 17644,
            ofcExistingRKM: 2021,
            ofcNewRKM: 15623,
            ofcLaidRKM: 0
          },
          {
            id: 16,
            state: "Assam",
            pia: "",
            agreementDate: "",
            newUpgraded: 1163,
            totalGPs: 2665,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Pending",
            avgUptimeGPs04: 330,
            avgUptimeGPs11: 330,
            avgUptimeDelta: 0,
            ftthConnections04: 3072,
            ftthConnections11: 3082,
            ftthDelta: 10,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 20083,
            ofcExistingRKM: 7759,
            ofcNewRKM: 12324,
            ofcLaidRKM: 0
          },
          {
            id: 17,
            state: "Odisha",
            pia: "BSNL",
            agreementDate: "",
            newUpgraded: 44,
            totalGPs: 6799,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Bid not floated",
            avgUptimeGPs04: 1081,
            avgUptimeGPs11: 2528,
            avgUptimeDelta: 1447,
            ftthConnections04: 6794,
            ftthConnections11: 6821,
            ftthDelta: 27,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 0,
            ofcExistingRKM: 0,
            ofcNewRKM: 0,
            ofcLaidRKM: 0
          },
          {
            id: 18,
            state: "Sikkim",
            pia: "",
            agreementDate: "",
            newUpgraded: 22,
            totalGPs: 185,
            hotoTarget: 0,
            hotoCompleted04: 0,
            hotoCompleted11: 0,
            hotoPercentage: 0,
            surveyTarget: 0,
            surveyCompleted04: 0,
            surveyCompleted11: 0,
            surveyPercentage: 0,
            snocStatus: "Pending",
            avgUptimeGPs04: 2,
            avgUptimeGPs11: 2,
            avgUptimeDelta: 0,
            ftthConnections04: 7,
            ftthConnections11: 7,
            ftthDelta: 0,
            commissionedGPs11: 0,
            financialProgress: 0,
            ofcTotalRKM: 0,
            ofcExistingRKM: 0,
            ofcNewRKM: 0,
            ofcLaidRKM: 0
          }
        ];

        const stateCoordinates = {
          "Punjab": { x: 76.79, y: 30.73 },
          "Uttar Pradesh (E)": { x: 82.07, y: 26.85 },
          "Uttar Pradesh (W)": { x: 79.85, y: 26.85 },
          "Himachal Pradesh": { x: 77.17, y: 31.10 },
          "West Bengal & A&N": { x: 88.36, y: 22.57 },
          "Bihar": { x: 85.31, y: 25.10 },
          "Madhya Pradesh": { x: 78.66, y: 22.97 },
          "Uttarakhand": { x: 79.02, y: 30.07 },
          "Jammu & Kashmir": { x: 76.27, y: 34.08 },
          "Kerala": { x: 76.27, y: 10.85 },
          "Karnataka": { x: 75.71, y: 15.32 },
          "Arunachal Pradesh": { x: 94.73, y: 28.22 },
          "Rajasthan": { x: 73.43, y: 27.02 },
          "Haryana": { x: 76.09, y: 29.06 },
          "Mizoram": { x: 92.72, y: 23.16 },
          "Assam": { x: 92.94, y: 26.24 },
          "Odisha": { x: 85.10, y: 20.95 },
          "Sikkim": { x: 88.61, y: 27.53 }
        };

        // Icon components (using Unicode symbols)
        const TrendingUpIcon = () => <span>üìà</span>;
        const TrendingDownIcon = () => <span>üìâ</span>;
        const MinusIcon = () => <span>‚ûñ</span>;
        const BuildingIcon = () => <span>üè¢</span>;
        const MapPinIcon = () => <span>üìç</span>;
        const ActivityIcon = () => <span>‚ö°</span>;
        const NetworkIcon = () => <span>üåê</span>;
        const UsersIcon = () => <span>üë•</span>;
        const DollarSignIcon = () => <span>üí∞</span>;
        const CalendarIcon = () => <span>üìÖ</span>;
        const RefreshIcon = () => <span>üîÑ</span>;

        // MetricCard Component
        const MetricCard = ({ title, value, change, changeType, icon, color }) => {
          const getChangeIcon = () => {
            switch (changeType) {
              case 'increase':
                return <TrendingUpIcon />;
              case 'decrease':
                return <TrendingDownIcon />;
              default:
                return <MinusIcon />;
            }
          };

          const getChangeColor = () => {
            switch (changeType) {
              case 'increase':
                return 'text-green-500';
              case 'decrease':
                return 'text-red-500';
              default:
                return 'text-gray-500';
            }
          };

          return (
            <div className="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 metric-card">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-sm font-medium text-gray-600">{title}</h3>
                <div className={`p-2 rounded-lg ${color}`}>
                  {icon}
                </div>
              </div>
              <div className="flex items-baseline justify-between mb-2">
                <div className="flex items-baseline space-x-1">
                  <span className="text-3xl font-bold text-gray-900 number-animation">{value.main}</span>
                  <span className="text-lg text-gray-500">out of {value.total}</span>
                </div>
                <div className={`text-2xl font-bold ${value.percentageColor}`}>
                  {value.percentage}%
                </div>
              </div>
              <div className="flex items-center">
                <span className={`text-sm ${getChangeColor()}`}>
                  {getChangeIcon()} {Math.abs(change)}% from last week
                </span>
              </div>
            </div>
          );
        };

        // ProgressChart Component
        const ProgressChart = ({ data, selectedTerritory }) => {
          const filteredData = selectedTerritory === 'India' ? data.slice(0, 8) : data.filter(state => state.id === parseInt(selectedTerritory));
          const maxValue = Math.max(...filteredData.map(d => Math.max(d.hotoPercentage, d.surveyPercentage)));
          const scaleFactor = 200 / maxValue;

          return (
            <div className="bg-white rounded-lg shadow-md p-6 chart-container">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">HOTO vs Survey Progress</h3>
              <div className="relative h-64">
                <svg width="100%" height="100%" viewBox="0 0 600 240">
                  {filteredData.map((state, index) => {
                    const barWidth = 40;
                    const barSpacing = 70;
                    const x = index * barSpacing + 50;
                    const hotoHeight = Math.max(state.hotoPercentage * scaleFactor, 5);
                    const surveyHeight = Math.max(state.surveyPercentage * scaleFactor, 5);
                    
                    return (
                      <g key={state.id}>
                        <rect
                          x={x}
                          y={220 - hotoHeight}
                          width={barWidth / 2}
                          height={hotoHeight}
                          fill="#8B5CF6"
                          className="hover:opacity-80 transition-opacity"
                        />
                        <rect
                          x={x + barWidth / 2}
                          y={220 - surveyHeight}
                          width={barWidth / 2}
                          height={surveyHeight}
                          fill="#10B981"
                          className="hover:opacity-80 transition-opacity"
                        />
                        <text
                          x={x + barWidth / 2}
                          y={235}
                          textAnchor="middle"
                          className="text-xs fill-gray-600"
                        >
                          {state.state.split(' ')[0]}
                        </text>
                      </g>
                    );
                  })}
                </svg>
                <div className="absolute top-0 right-0 flex items-center space-x-4 text-sm">
                  <div className="flex items-center">
                    <div className="w-3 h-3 bg-purple-500 rounded mr-2"></div>
                    <span>HOTO</span>
                  </div>
                  <div className="flex items-center">
                    <div className="w-3 h-3 bg-green-500 rounded mr-2"></div>
                    <span>Survey</span>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        // PieChart Component
        const PieChart = ({ data, selectedTerritory }) => {
          const filteredData = selectedTerritory === 'India' ? data.slice(0, 6) : data.filter(state => state.id === parseInt(selectedTerritory));
          const total = filteredData.reduce((sum, state) => sum + state.totalGPs, 0);
          const colors = ['#8B5CF6', '#10B981', '#F59E0B', '#EF4444', '#3B82F6', '#EC4899'];
          
          let cumulativePercentage = 0;
          const slices = filteredData.map((state, index) => {
            const percentage = (state.totalGPs / total) * 100;
            const startAngle = (cumulativePercentage / 100) * 360;
            const endAngle = ((cumulativePercentage + percentage) / 100) * 360;
            
            cumulativePercentage += percentage;
            
            const largeArc = percentage > 50 ? 1 : 0;
            const x1 = 100 + 80 * Math.cos((startAngle - 90) * Math.PI / 180);
            const y1 = 100 + 80 * Math.sin((startAngle - 90) * Math.PI / 180);
            const x2 = 100 + 80 * Math.cos((endAngle - 90) * Math.PI / 180);
            const y2 = 100 + 80 * Math.sin((endAngle - 90) * Math.PI / 180);
            
            return {
              path: `M 100 100 L ${x1} ${y1} A 80 80 0 ${largeArc} 1 ${x2} ${y2} z`,
              color: colors[index % colors.length],
              state: state.state,
              percentage: percentage.toFixed(1)
            };
          });

          return (
            <div className="bg-white rounded-lg shadow-md p-6 chart-container">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">GP Distribution by State</h3>
              <div className="flex items-center justify-center">
                <div className="relative">
                  <svg width="200" height="200" viewBox="0 0 200 200">
                    {slices.map((slice, index) => (
                      <path
                        key={index}
                        d={slice.path}
                        fill={slice.color}
                        className="hover:opacity-80 transition-opacity cursor-pointer"
                        title={`${slice.state}: ${slice.percentage}%`}
                      />
                    ))}
                  </svg>
                </div>
                <div className="ml-6 space-y-2">
                  {slices.map((slice, index) => (
                    <div key={index} className="flex items-center text-sm">
                      <div 
                        className="w-3 h-3 rounded mr-2"
                        style={{ backgroundColor: slice.color }}
                      ></div>
                      <span className="text-gray-700">
                        {slice.state.split(' ')[0]} {slice.percentage}%
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          );
        };

        // IndiaMap Component
        const IndiaMap = ({ selectedState, onStateSelect }) => {
          const stateNames = Object.keys(stateCoordinates);

          return (
            <div className="bg-white rounded-lg shadow-md p-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">India Map</h3>
              <div className="relative w-full h-96 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg overflow-hidden">
                <svg width="100%" height="100%" viewBox="0 0 400 500" className="absolute inset-0">
                  <path
                    d="M 100 50 L 300 50 L 320 80 L 330 120 L 310 180 L 300 240 L 280 300 L 260 340 L 240 380 L 200 420 L 160 440 L 120 420 L 100 380 L 80 340 L 70 300 L 60 240 L 70 180 L 80 120 L 90 80 Z"
                    fill="#E5E7EB"
                    stroke="#9CA3AF"
                    strokeWidth="2"
                  />
                  
                  {stateNames.map((state, index) => {
                    const coords = stateCoordinates[state];
                    const x = ((coords.x - 68) / 30) * 300 + 50;
                    const y = ((38 - coords.y) / 28) * 400 + 50;
                    
                    return (
                      <circle
                        key={state}
                        cx={x}
                        cy={y}
                        r="6"
                        fill={selectedState === state ? "#3B82F6" : "#10B981"}
                        stroke="white"
                        strokeWidth="2"
                        className="cursor-pointer hover:scale-110 transition-transform state-dot"
                        onClick={() => onStateSelect(state)}
                      />
                    );
                  })}
                </svg>
              </div>
              <div className="mt-4 text-sm text-gray-600">
                <p>Click on state markers to view specific data</p>
              </div>
            </div>
          );
        };

        // StateTable Component
        const StateTable = ({ data, selectedTerritory }) => {
          const filteredData = selectedTerritory === 'India' ? data : data.filter(state => state.id === parseInt(selectedTerritory));

          const getStatusColor = (percentage) => {
            if (percentage >= 100) return 'bg-green-100 text-green-800';
            if (percentage >= 50) return 'bg-yellow-100 text-yellow-800';
            return 'bg-red-100 text-red-800';
          };

          const formatNumber = (num) => {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
          };

          return (
            <div className="bg-white rounded-lg shadow-md p-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">State-wise Progress Details</h3>
              <div className="overflow-x-auto">
                <table className="min-w-full table-auto">
                  <thead>
                    <tr className="bg-gray-50">
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">State</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">PIA</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Total GPs</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">HOTO %</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Survey %</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">FTTH</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Financial</th>
                      <th className="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                    </tr>
                  </thead>
                  <tbody className="bg-white divide-y divide-gray-200">
                    {filteredData.map((state) => (
                      <tr key={state.id} className="hover:bg-gray-50">
                        <td className="px-4 py-2 text-sm font-medium text-gray-900">{state.state}</td>
                        <td className="px-4 py-2 text-sm text-gray-500">{state.pia}</td>
                        <td className="px-4 py-2 text-sm text-gray-500">{formatNumber(state.totalGPs)}</td>
                        <td className="px-4 py-2">
                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(state.hotoPercentage)}`}>
                            {state.hotoPercentage}%
                          </span>
                        </td>
                        <td className="px-4 py-2">
                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(state.surveyPercentage)}`}>
                            {state.surveyPercentage}%
                          </span>
                        </td>
                        <td className="px-4 py-2 text-sm text-gray-500">{formatNumber(state.ftthConnections11)}</td>
                        <td className="px-4 py-2 text-sm text-gray-500">{state.financialProgress} cr</td>
                        <td className="px-4 py-2 text-sm text-gray-500 max-w-xs truncate">{state.snocStatus}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          );
        };

        // ProjectTimeline Component
        const ProjectTimeline = ({ data, selectedTerritory }) => {
          const filteredData = selectedTerritory === 'India' ? data : data.filter(state => state.id === parseInt(selectedTerritory));
          
          // Calculate overall progress based on HOTO completion
          const totalGPs = filteredData.reduce((sum, state) => sum + state.totalGPs, 0);
          const completedGPs = filteredData.reduce((sum, state) => sum + state.hotoCompleted11, 0);
          const overallProgress = totalGPs > 0 ? (completedGPs / totalGPs) * 100 : 0;
          
          // Calculate current date position (assuming project started Jan 1, 2024)
          const projectStartDate = new Date('2024-01-01');
          const currentDate = new Date();
          const projectDuration = 3 * 365; // 3 years in days
          const daysPassed = Math.floor((currentDate - projectStartDate) / (1000 * 60 * 60 * 24));
          const currentPosition = Math.min((daysPassed / projectDuration) * 100, 100);
          
          const milestones = [
            { id: 1, threshold: 10, position: 20, label: 'I', date: 'Jun 29, 2024' },
            { id: 2, threshold: 30, position: 40, label: 'II', date: 'Dec 26, 2024' },
            { id: 3, threshold: 50, position: 60, label: 'III', date: 'Jun 24, 2025' },
            { id: 4, threshold: 75, position: 80, label: 'IV', date: 'Dec 21, 2025' },
            { id: 5, threshold: 90, position: 90, label: 'V', date: 'Jun 19, 2026' }
          ];

          return (
            <div className="bg-white rounded-lg shadow-lg p-3 mb-6">
              <div className="flex justify-between items-center mb-4">
                <h3 className="text-base font-semibold text-gray-800">Project Timeline & Milestones</h3>
                <div className="text-xs text-gray-600">
                  <span>{selectedTerritory === 'India' ? 'All Territories' : `Territory ${selectedTerritory}`}</span> | 
                  <span className="ml-1">{overallProgress.toFixed(1)}% Complete</span>
                </div>
              </div>
              
              {/* Timeline Container */}
              <div className="relative flex-1 mx-4">
                {/* Timeline Bar */}
                <div className="relative h-4 bg-gray-200 rounded overflow-hidden">
                  {/* Progress Fill */}
                  <div 
                    className="absolute top-0 left-0 h-full bg-gradient-to-r from-green-400 to-blue-500 transition-all duration-1000" 
                    style={{ width: `${Math.min(overallProgress, 100)}%` }}
                  ></div>
                  
                  {/* Milestone Markers */}
                  <div className="absolute top-0 left-0 w-full h-full flex items-center">
                    {/* Start Marker (T0) */}
                    <div className="absolute flex flex-col items-center" style={{ left: '0%', transform: 'translateX(-50%)' }}>
                      <div className="w-2 h-2 bg-green-600 rounded-full border border-white shadow-sm"></div>
                      <span className="text-xs text-green-600 font-medium mt-0.5">T0</span>
                    </div>
                    
                    {/* Milestone Markers */}
                    {milestones.map((milestone) => (
                      <div key={milestone.id} className="absolute flex flex-col items-center milestone-marker" style={{ left: `${milestone.position}%`, transform: 'translateX(-50%)' }}>
                        <div className={`w-2 h-2 rounded-full border border-white shadow-sm ${
                          overallProgress >= milestone.threshold ? 'bg-green-500' : 'bg-blue-500'
                        }`}></div>
                        <div className="text-xs font-medium text-blue-600">{milestone.label}</div>
                      </div>
                    ))}
                    
                    {/* End Marker (Te) */}
                    <div className="absolute flex flex-col items-center" style={{ left: '100%', transform: 'translateX(-50%)' }}>
                      <div className="w-2 h-2 bg-red-600 rounded-full border border-white shadow-sm"></div>
                      <div className="text-xs font-medium text-red-600 mt-0.5">Te</div>
                    </div>
                    
                    {/* Current Date Indicator */}
                    <div className="absolute flex flex-col items-center transition-all duration-500" style={{ left: `${currentPosition}%` }}>
                      <div className="w-0.5 h-4 bg-orange-500 shadow-lg"></div>
                      <div className="text-xs font-bold text-orange-600 mt-1">Today</div>
                    </div>
                  </div>
                </div>
                
                {/* Timeline Dates */}
                <div className="flex justify-between mt-1 text-xs text-gray-500">
                  <span>Jan 2024</span>
                  <span>Dec 2026</span>
                </div>
              </div>
            </div>
          );
        };

        // Main App Component
        const App = () => {
          const [selectedTerritory, setSelectedTerritory] = React.useState('India');
          const [selectedUnit, setSelectedUnit] = React.useState('GPs');
          const [selectedState, setSelectedState] = React.useState('');
          const [activeTab, setActiveTab] = React.useState('dashboard');

          const handleStateSelect = (state) => {
            setSelectedState(state);
            const stateData = bharatNetData.find(s => s.state === state);
            if (stateData) {
              setSelectedTerritory(stateData.id.toString());
            }
          };

          const filteredData = React.useMemo(() => {
            if (selectedTerritory === 'India') {
              return bharatNetData;
            }
            return bharatNetData.filter(state => state.id === parseInt(selectedTerritory));
          }, [selectedTerritory]);

          const aggregatedMetrics = React.useMemo(() => {
            const totalStates = filteredData.length;
            const totalGPs = filteredData.reduce((sum, state) => sum + state.totalGPs, 0);
            const totalHOTO = filteredData.reduce((sum, state) => sum + state.hotoCompleted11, 0);
            const totalSurvey = filteredData.reduce((sum, state) => sum + state.surveyCompleted11, 0);
            const totalFTTH = filteredData.reduce((sum, state) => sum + state.ftthConnections11, 0);
            const avgUptime = filteredData.reduce((sum, state) => sum + state.avgUptimeGPs11, 0);
            const totalFinancial = filteredData.reduce((sum, state) => sum + state.financialProgress, 0);
            const completionRate = totalGPs > 0 ? (totalHOTO / totalGPs) * 100 : 0;

            return {
              totalStates,
              totalGPs,
              totalHOTO,
              totalSurvey,
              totalFTTH,
              avgUptime,
              totalFinancial,
              completionRate
            };
          }, [filteredData]);

          const formatNumber = (num) => {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 100000) return (num / 100000).toFixed(1) + 'L';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
          };

          // AI Insights calculations
          const aiInsights = React.useMemo(() => {
            const insights = bharatNetData.map(item => {
              // Calculate planned vs actual for HOTO
              const hotoPlanned = item.hotoTarget;
              const hotoActual = item.hotoCompleted11;
              const hotoVariance = hotoActual - hotoPlanned;
              const hotoVariancePercent = hotoPlanned > 0 ? ((hotoVariance / hotoPlanned) * 100) : 0;
              
              // Calculate planned vs actual for Survey
              const surveyPlanned = item.surveyTarget;
              const surveyActual = item.surveyCompleted11;
              